<!--<html ng-app="main">-->
    <!--<head>-->
        <!--<script type="text/javascript" src="angular.min.js"></script>-->
        <!--<script type="text/javascript" src="fundController.js"></script>-->
        <!--<script type="text/javascript" src="ng-table.js"></script>-->
        <!--<link rel="stylesheet" type="text/css" href="bootstrap.min.css">-->
        <!--<link rel="stylesheet" type="text/css" href="ng-table.css">-->

    <!--</head>-->
    <!--<body>-->
        <!--<div ng-controller="DemoCtrl">-->

        <!--</div>-->
    <!--</body>-->
<!--</html>-->

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="bootstrap.min.css">
    <!--[if lt IE 9]>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <![endif]-->
    <script src="angular.min.js"></script>
    <script src="ng-table.js"></script>
    <link rel="stylesheet" href="ng-table.css">
</head>
<body ng-app="main">

<h1>Dynamic columns</h1>

<div ng-controller="DemoCtrl">

    <table ng-table="tableParams" show-filter="true" class="table">
        <thead>
        <tr>
            <th ng-repeat="column in columns"
                class="text-center sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(column.field, 'asc'),
                    'sort-desc': tableParams.isSortBy(column.field, 'desc')
                  }"
                ng-click="tableParams.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')">
                <div>{{column.title}}</div>
            </th>
        </tr>

        </thead>
        <tbody>

            <tr ng-repeat="fund in $data">

                <td ng-repeat="column in columns" sortable="column.field">
                    {{fund['quotes'][$index].change}}

                </td>
            </tr>

        </tbody>
    </table>

    <script>
        var app = angular.module('main', ['ngTable']).
                controller('DemoCtrl', function($scope, $filter, ngTableParams) {

                    var data =[
                        {
                            "name": "FSELX",
                            "quotes": [
                                {
                                    "adjusted": 71.34,
                                    "change": -3.0698065601346,
                                    "date": 1397023200000
                                },
                                {
                                    "adjusted": 69.15,
                                    "change": 2.0245842371656,
                                    "date": 1397628000000
                                },
                                {
                                    "adjusted": 70.55,
                                    "change": -1.3607370659107,
                                    "date": 1398232800000
                                }
                            ]
                        },
                        {
                            "name": "YHOO",
                            "quotes": [
                                {
                                    "adjusted": 34.87,
                                    "change": 4.2443361055349,
                                    "date": 1397023200000
                                },
                                {
                                    "adjusted": 36.35,
                                    "change": -2.5034387895461,
                                    "date": 1397628000000
                                },
                                {
                                    "adjusted": 35.44,
                                    "change": 1.4390519187359,
                                    "date": 1398232800000
                                }
                            ]
                        }
                    ];

                    $scope.columns = [
                        { title: 'Week1', field: 'change'},
                        { title: 'Week2', field: 'change'},
                        { title: 'Week3', field: 'change'}
                    ];
                    $scope.tableParams = new ngTableParams({
                        page: 1,            // show first page
                        count: 100          // count per page

                    }, {
                        total: data.length, // length of data
                        getData: function($defer, params) {
                            // use build-in angular filter
                            var orderedData = params.sorting() ?
                                    $filter('orderBy')(data, params.orderBy()) :
                                    data;

                            orderedData = params.filter() ?
                                    $filter('filter')(orderedData, params.filter()) :
                                    orderedData;

                            params.total(orderedData.length);
                            $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));
                        }
                    });
                })
    </script>

</div>
</body>
</html>